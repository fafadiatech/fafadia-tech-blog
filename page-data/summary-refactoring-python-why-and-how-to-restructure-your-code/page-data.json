{"componentChunkName":"component---src-templates-index-js","path":"/summary-refactoring-python-why-and-how-to-restructure-your-code/","result":{"data":{"site":{"meta":{"title":"Fafadia Tech Blog","description":"Official Blog of Fafadia Tech","url":"http://www.fafadiatech.com","author":"fafadiatech","twitter":"fafadiatechhq``","adsense":""}},"post":{"id":"f7438af5-e3e2-5ee8-b3a0-df9dfb3329e5","html":"<p><a href=\"https://en.wikipedia.org/wiki/Code_refactoring\">Refactoring</a> is often not budgeted. But as <a href=\"https://twitter.com/haxor\">Brett Slatkin</a> mentions in his <a href=\"https://www.youtube.com/watch?v=D_6ybDcU5gc\">PyCon 2016 talk</a> it is one of the most important thing experienced developers get into habbit of doing. Following is summary of the talk</p>\n<ul>\n<li>\n<p>What is refactoring?</p>\n<ul>\n<li>Repeatedly reorganizing and rewriting code until its obvious* to new reader.</li>\n<li>When you’re refactoring is optimizing for readability</li>\n</ul>\n</li>\n<li>\n<p>When do you refactor?</p>\n<ul>\n<li>In advance</li>\n<li>For testing</li>\n<li>“Don’t repeat yourself”</li>\n<li>Brittleness</li>\n<li>\n<p>Complexity</p>\n<!--more-->\n</li>\n</ul>\n</li>\n<li>\n<p>What’s the difference between good and great programmer?</p>\n<ul>\n<li>Spend almost equal time in Writing and Testing code, Refactoring and Styling &#x26; Documentaton</li>\n<li>Half-time in refactoring</li>\n</ul>\n</li>\n<li>\n<p>How do you refactor?</p>\n<ul>\n<li>Identify bad code</li>\n<li>Improve it</li>\n<li>Run tests</li>\n<li>Fix and improve tests</li>\n<li>Repeat</li>\n</ul>\n</li>\n<li>\n<p>How do you refactor in practice?</p>\n<ul>\n<li>Rename, split and move</li>\n<li>Simplify</li>\n<li>Redraw boundaries</li>\n</ul>\n</li>\n<li>\n<p>Book Recommendations</p>\n<ul>\n<li>Refactoring by Martin Fowler</li>\n<li>Refactoring Ruby Edition by Jay Fields</li>\n<li>Effective Python</li>\n</ul>\n</li>\n<li>\n<p>Strategies</p>\n<ul>\n<li>Prerequisites</li>\n<li>Thorough Tests</li>\n<li>Quick test (Should be less than 5 mins)</li>\n<li>Source control</li>\n<li>Willing to make mistakes</li>\n<li>Extract Variables &#x26; Extract Functions</li>\n<li>Simplify expressions in if/else blocks to more readable names (i.e. Refactor them into variables)</li>\n<li>One step furthure: Extract them into functions</li>\n<li>Extracting functions is good, but over time it will become complicated and hard to understand i.e. what it is doing and how to test it</li>\n<li>If that is a case, Extract a <strong>Class</strong> from it and use magic method <code class=\"language-text\">def __bool__(self)</code>. Now replace functional version with class version (Aka Non-zero)</li>\n<li>Reason to do this is for <strong>testing</strong>. Makes it easy to test thing out</li>\n<li>Things to remember:</li>\n<li>Extract variables and functions to improve readability</li>\n<li>Extract variables into classes to improve testablity</li>\n<li>Use <code class=\"language-text\">__boo__</code> to indicate a class is a paper trail</li>\n<li>Extract Class &#x26; Move Fields</li>\n<li>If you have one class with complex logic and does everything in one single class that is a sign it needs refactoring</li>\n<li>\n<p>How do you redraw boundaries?</p>\n<ul>\n<li>Add an improved interface</li>\n<li>Maintain backwards compatability</li>\n<li>Issue warning for old usage</li>\n<li><code class=\"language-text\">import warnings</code></li>\n<li><code class=\"language-text\">warnings.warn(&quot;something&quot;)</code></li>\n<li><code class=\"language-text\">python -W error your_code.py</code> will convert warnings to errors</li>\n</ul>\n</li>\n<li>Refactor <code class=\"language-text\">Pet</code> class to <code class=\"language-text\">Animal</code></li>\n<li>\n<p>Raise TypeError for mixed usages (old and new one)</p>\n<ul>\n<li>Migrate old usage to new usage</li>\n<li>Run tests to verify the new correctness</li>\n<li>Fix and improve broken tests</li>\n<li>Remove code from interface</li>\n<li>\n<p>Things to Remember:</p>\n<ul>\n<li>Split classes using optional arguments to <code class=\"language-text\">__init__</code></li>\n<li>Use <code class=\"language-text\">@property</code> to move methods and fields between classes</li>\n<li>Issue warnings in old code paths to find their occurance</li>\n</ul>\n</li>\n<li>Need defensive property tombstones</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>","frontmatter":{"layout":"post","title":"Summary: Refactoring Python: Why and how to restructure your code","path":"/summary-refactoring-python-why-and-how-to-restructure-your-code/","category":"Technical","tags":["Summary","Python"],"description":"Refactoring is basic activity that all developers do. This post summarizes interesting talk, learn how to do them more effectively","date":"2017/02/10","image":{"childImageSharp":{"fluid":{"base64":"data:image/jpeg;base64,/9j/2wBDABALDA4MChAODQ4SERATGCgaGBYWGDEjJR0oOjM9PDkzODdASFxOQERXRTc4UG1RV19iZ2hnPk1xeXBkeFxlZ2P/2wBDARESEhgVGC8aGi9jQjhCY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2NjY2P/wgARCAANABQDASIAAhEBAxEB/8QAFwABAQEBAAAAAAAAAAAAAAAABQACBv/EABYBAQEBAAAAAAAAAAAAAAAAAAEAA//aAAwDAQACEAMQAAABPY53csQcaf/EABkQAQEBAQEBAAAAAAAAAAAAAAECABEDE//aAAgBAQABBQInmAT1SbL5vrWquv8A/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAT/9oACAEDAQE/ARS1b//EABURAQEAAAAAAAAAAAAAAAAAAAAR/9oACAECAQE/AUf/xAAbEAADAAIDAAAAAAAAAAAAAAAAARESMSFBkf/aAAgBAQAGPwJNXVLnyRuml4dFP//EABsQAQADAQADAAAAAAAAAAAAAAEAESExQVFh/9oACAEBAAE/IW3Eud7UgxuSnljHL/bGWl77WxcwfCf/2gAMAwEAAgADAAAAEJg//8QAFhEBAQEAAAAAAAAAAAAAAAAAAREA/9oACAEDAQE/EHaOCJDf/8QAFhEBAQEAAAAAAAAAAAAAAAAAAQAR/9oACAECAQE/EEGzf//EABsQAQEBAAMBAQAAAAAAAAAAAAERADFBUSGx/9oACAEBAAE/EOpfDflgzM2mJD0v7ksAIIsyi1DyEygFCvJ5bxlyr6YG/9k=","aspectRatio":1.5058823529411764,"src":"/blog/static/5798bd0125dfbce624cebf1efd1afdb6/0f3a1/computer-1245714_640.jpg","srcSet":"/blog/static/5798bd0125dfbce624cebf1efd1afdb6/1ada3/computer-1245714_640.jpg 125w,\n/blog/static/5798bd0125dfbce624cebf1efd1afdb6/8f7df/computer-1245714_640.jpg 250w,\n/blog/static/5798bd0125dfbce624cebf1efd1afdb6/0f3a1/computer-1245714_640.jpg 500w,\n/blog/static/5798bd0125dfbce624cebf1efd1afdb6/f422e/computer-1245714_640.jpg 640w","sizes":"(max-width: 500px) 100vw, 500px"}}}}}},"pageContext":{}}}